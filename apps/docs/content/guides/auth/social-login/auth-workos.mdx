---
id: 'auth-workos'
title: 'Login with WorkOS'
description: 'Add WorkOS AuthKit to your Supabase project'
---

To enable WorkOS Auth for your project, you need to set up a WorkOS application and add the credentials to your Supabase Dashboard. [WorkOS AuthKit](https://authkit.com) provides email/password authentication and social login by default, with the ability to enable SSO through a simple dashboard toggle.

## Overview

In this guide, we will set up WorkOS AuthKit. AuthKit gives you social logins and email-based authentication for free.

Once installed, AuthKit enables you to add Single-Sign-On(SSO), supporting many different providers, via toggles in the WorkOS dashboard with no additional code changes.

There are 5 steps to set up AuthKit:

## Step 1. Create a WorkOS organization

Log in to the WorkOS dashboard and visit the Organizations tab to create an organization
![Create an Organization](/docs/img/guides/auth-workos/workos-create-organization.png)

## Step 2. Obtain your `Client ID` and `WORKOS_API_KEY` values

![Get your Environment's Client ID and Secret](/docs/img/guides/auth-workos/workos-dashboard-get-client-id-and-key.png)

Visit the getting started page of the WorkOS dashboard, at [https://dashboard.workos.com/get-started](https://dashboard.workos.com/get-started), to obtain the following values:
* `WORKOS_CLIENT_ID`
* `WORKOS_API_KEY`

## Step 3. Connect a WorkOS supported identity provider

With AuthKit, you get email-based authentication and social logins for free, but you can optionally configure addiitonal OAuth providers
at any time within the WorkOS dashboard on the Authentication tab:

![Configure SSO or OAuth providers at your leisure](/docs/img/guides/auth-workos/workos-auth-config-dashboard.png)

You can pick between any one of the many identity providers that WorkOS supports.

## Step 4. Add your WorkOS credentials to your Supabase project

![Enter your WorkOS application details in your Supabase app's auth provider settings panel](/docs/img/guides/auth-workos/supabase-workos-configuration.png)

1. Go to your Supabase Project Dashboard
1. In the left sidebar, click the Authentication icon (near the top)
1. Click on Providers under the Configuration section
1. Click on WorkOS from the accordion list to expand
1. Toggle the `WorkOS Enabled` switch to ON
1. Enter `https://api.workos.com` in the WorkOS URL field
1. Enter your WorkOS Client ID and WorkOS Client Secret saved in the previous step
1. Copy the `Callback URL (for OAuth)` value from the form and save it somewhere handy
1. Click Save

## Step 5. Set your Supabase redirect URI in the WorkOS Dashboard

Visit the WorkOS dashboard and click the redirects button in the left navigation panel.

On the redirects page, enter your Supabase project's `Callback URL (for OAuth)` which you saved in the previous step, as shown below:

![Set your Supbase project redirect URL in the WorkOS dashboard](/docs/img/guides/auth-workos/workos-set-supabase-redirect.png)

## Add auth code to your client app

<Tabs
  scrollable
  size="small"
  type="underlined"
  defaultActiveId="js"
  queryGroup="language"
>
<TabPanel id="js" label="JavaScript">

<CreateClientSnippet />

When your user signs in, call [`getAuthorizationUrl()`](https://workos.com/docs/reference/sso/get-authorization-url)

```js
import { WorkOS } from '@workos-inc/node';
import { NextResponse } from 'next/server';

// Fail fast if required environment variables are not set
const apiKey = process.env.WORKOS_API_KEY;
const clientId = process.env.WORKOS_CLIENT_ID;
// Optionally, set a fallback Redirect URI
const redirectUri = process.env.REDIRECT_URI || 'http://localhost:3000/auth/callback';

if (!apiKey) {
  throw new Error('WORKOS_API_KEY is not set in the environment variables.');
}

if (!clientId) {
  throw new Error('WORKOS_CLIENT_ID is not set in the environment variables.');
}

const workos = new WorkOS(apiKey);

export async function GET() {
  // Use your Organization ID from the WorkOS dashboard: https://dashboard.workos.com
  const organization = 'org_XXXXXX';

  const authorizationUrl = workos.sso.getAuthorizationUrl({
    organization,
    redirectUri,
    clientId,
  });

  return NextResponse.json({ url: authorizationUrl });
}
```

When your user successfully signs in via social logins, magic link email or a configured SSO provider, you then exchange the code returned by WorkOS for an authenticated user profile:

```js
import { WorkOS } from '@workos-inc/node';

const apiKey = process.env.WORKOS_API_KEY;
const clientId = process.env.WORKOS_CLIENT_ID;

if (!apiKey) {
  throw new Error('WORKOS_API_KEY is not set in the environment variables.');
}

if (!clientId) {
  throw new Error('WORKOS_CLIENT_ID is not set in the environment variables.');
}

const workos = new WorkOS(apiKey);

const { access_token, profile } = await workos.sso.getProfileAndToken({
  // Read the code query param from the Redirect URL that WorkOS returns after successful auth
  // This static code is provided by way of example:
  code: '01DMEK0J53CVMC32CK5SE0KZ8Q',
  clientId: clientId,
});
```

Refer to the [WorkOS Documentation](https://workos.com/docs/reference/sso/authorize/) to learn more about the different methods.

</TabPanel>
<TabPanel id="flutter" label="Flutter">

When your user signs in, call [signInWithOAuth()](/docs/reference/dart/auth-signinwithoauth) with `workos` as the `provider`:

```dart
Future<void> signInWithWorkOS() async {
  await supabase.auth.signInWithOAuth(
    OAuthProvider.workos,
    redirectTo: kIsWeb ? null : 'my.scheme://my-host', // Optionally set the redirect link to bring back the user via deeplink.
    authScreenLaunchMode:
        kIsWeb ? LaunchMode.platformDefault : LaunchMode.externalApplication, // Launch the auth screen in a new webview on mobile.
    queryParams: {
      'connection': '<your_connection>',
      'organization': '<your_organization',
      'workos_provider': '<your_provider>',
    },
  );
}
```

Refer to the [WorkOS Documentation](https://workos.com/docs/reference/sso/authorize/) to learn more about the different methods.

</TabPanel>
<TabPanel id="kotlin" label="Kotlin">

When your user signs in, call [signInWith(Provider)](/docs/reference/kotlin/auth-signinwithoauth) with `WorkOS` as the `Provider`:

```kotlin
suspend fun signInWithWorkOS() {
	supabase.auth.signInWith(WorkOS) {
		queryParams["connection"] = "<your_connection>"
		queryParams["organization"] = "<your_organization>"
		queryParams["workos_provider"] = "<your_provider>"
	}
}
```

Refer to the [WorkOS Documentation](https://workos.com/docs/reference/sso/authorize/) to learn more about the different methods.

</TabPanel>
</Tabs>

<OAuthPkceFlow />

<Tabs
  scrollable
  size="small"
  type="underlined"
  defaultActiveId="js"
  queryGroup="language"
>
<TabPanel id="js" label="JavaScript">

When your user signs out, call [signOut()](/docs/reference/javascript/auth-signout) to remove them from the browser session and any objects from localStorage:

```js
async function signOut() {
  const { error } = await supabase.auth.signOut()
}
```

</TabPanel>
<TabPanel id="flutter" label="Flutter">

When your user signs out, call [signOut()](/docs/reference/dart/auth-signout) to remove them from the browser session and any objects from localStorage:

```dart
Future<void> signOut() async {
  await supabase.auth.signOut();
}
```

</TabPanel>
<TabPanel id="kotlin" label="Kotlin">

When your user signs out, call [signOut()](/docs/reference/kotlin/auth-signout) to remove them from the browser session and any objects from localStorage:

```kotlin
suspend fun signOut() {
	supabase.auth.signOut()
}
```

</TabPanel>
</Tabs>

## Resources

- [WorkOS Documentation](https://workos.com/docs/sso/guide)
